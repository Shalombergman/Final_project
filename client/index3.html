<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Appointment</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <h1>Schedule Appointment</h1>
    <div class="doctor-card">
        <!-- <img src="doctor.jpg"> -->
        <h2 id="doctorName"></h2>
        <p id="doctorSpecialty"></p>
        <p>Working Hours: 9:00 AM - 5:00 PM</p>
    </div>
    <form id="scheduleForm">
        <label for="date">Select a date:</label>
        <input type="date" id="date" name="date" required>
        <br><br>
        <label for="time">Select a time:</label>
        <input type="time" id="time" name="time" required>
        <br><br>
        <button type="submit">Schedule</button>
    </form>

    <div id="unavailableSlots">
        <h2>Unavailable Slots</h2>
        <ul id="unavailableList"></ul>
    </div>

    <script>
        // Dummy data for unavailable slots
        const unavailableSlots = {
            "2024-06-20": ["09:00", "10:00", "14:00"],
            "2024-06-21": ["11:00", "13:00"],
            "2024-06-22": ["09:00", "12:00", "15:00"],
        };

        document.addEventListener('DOMContentLoaded', () => {
            const selectedValue = localStorage.getItem('selectedValue');
            const [doctorName, doctorSpecialty] = selectedValue.split('\n');

            document.getElementById('doctorName').innerText = doctorName.trim();
            document.getElementById('doctorSpecialty').innerText = doctorSpecialty.trim();

            const dateInput = document.getElementById('date');
            const unavailableList = document.getElementById('unavailableList');

            dateInput.addEventListener('change', () => {
                const selectedDate = dateInput.value;
                unavailableList.innerHTML = '';

                if (unavailableSlots[selectedDate]) {
                    unavailableSlots[selectedDate].forEach(time => {
                        const listItem = document.createElement('li');
                        listItem.innerText = `${selectedDate} ${time}`;
                        listItem.classList.add('unavailable');
                        unavailableList.appendChild(listItem);
                    });
                }
            });

            document.getElementById('scheduleForm').addEventListener('submit', function(event) {
                event.preventDefault();
                const date = document.getElementById('date').value;
                const time = document.getElementById('time').value;

                if (unavailableSlots[date] && unavailableSlots[date].includes(time)) {
                    alert('The selected date and time are unavailable. Please choose another slot.');
                } else {
                    alert(`Appointment scheduled on ${date} at ${time} with ${doctorName}`);
                    // כאן תוכל להוסיף קוד לשליחת הנתונים לשרת או לטפל במידע כפי שתרצה
                }
            });
        });
    </script>
</body>
</html>